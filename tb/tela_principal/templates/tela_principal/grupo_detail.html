{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>{{ grupo.nome }}</title>
    <link rel="stylesheet" href="{% static 'tela_principal/css/detail.css' %}">
</head>
<body>
    <div class="container">

        <!-- Cabeçalho do grupo -->
        <div class="grupo-header">
            <h1>{{ grupo.nome }}</h1>
            <p>{{ grupo.descricao }}</p>

            <div class="header-buttons">
                <!-- Botão Voltar -->
                <a href="{% url 'dashboard' %}" class="btn voltar">← Voltar</a>

                {% if user in grupo.participantes.all %}
                    <a href="{% url 'sair_grupo' grupo.id %}" class="btn danger">Sair do grupo</a>
                {% else %}
                    <a href="{% url 'entrar_grupo' grupo.id %}" class="btn">Entrar no grupo</a>
                {% endif %}
            </div>
        </div>

        <!-- Formulário de postagem -->
        <div class="postar">
            <h2>Nova Postagem</h2>
            <form method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit" class="btn">Postar</button>
            </form>
        </div>

        <!-- Lista de postagens -->
        <div class="postagens">
            <h2>Postagens</h2>
            {% for postagem in postagens %}
                <div class="post">
                    <div class="post-header">
                        <strong>{{ postagem.autor.username }}</strong>
                        <span class="data">{{ postagem.data_criacao|date:"d/m/Y H:i" }}</span>
                    </div>
                    <p>{{ postagem.texto }}</p>
                    {% if postagem.imagem %}
                        <img src="{{ postagem.imagem.url }}" class="post-img">
                    {% endif %}
                </div>
            {% empty %}
                <p class="empty">Nenhuma postagem ainda.</p>
            {% endfor %}
        </div>

    </div>
</body>
</html>
